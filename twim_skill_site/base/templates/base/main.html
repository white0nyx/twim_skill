{%  extends 'twim_skill_site/templates/base.html' %}

{% block content %}
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <script {% if message.tags %} class="{{ message.tags }}"{% endif %}>
        window.alert("{{ message }}")
    </script>
    {% endfor %}
</div>
{% endif %}

<div id="content">
    {% if lobbies %}
    <h1>Доступные серверы</h1>

    <ul id="servers">
        <!-- Здесь будут добавляться серверы динамически -->
        {% for lobby in lobbies %}
        <li>
            <p>ID лобби: {{ lobby.pk }}</p>
            <p>Карта: {{ lobby.map }}</p>
            <p>Ставка: {{ lobby.bet }}</p>
            <p>Тип игры: НЕТ ДАННЫХ</p>
            <p>Свободных мест: НЕТ ДАННЫХ</p>
            <p>Требуемый уровень: {{ lobby.max_lvl_enter }}+</p>

            {% if user_lobby_data.user_in_lobby.lobby.pk == lobby.pk %}
            <a href="{% url 'detail_lobby' slug=user_lobby_data.user_lobby_slug %}">
            <button>Вернуться к лобби</button>
            </a>

            {% elif not user_lobby_data.user_in_lobby.lobby.pk %}
            <a href="{% url 'detail_lobby' slug=lobby.slug %}">
            <button>Подключиться</button>
            </a>

            {% else %}
            <button disabled title="Для подключения необходимо покинуть предыдущее лобби">Подключиться</button>
            {% endif %}
        </li>
        <hr>
        {% endfor %}
    {% else %}
    <h1>Не обнаружено доступных серверов для подключения</h1>
    {% endif %}
    </ul>
</div>



<div id="sidebar">
    <h2>Фильтры</h2>
    <label for="price-range">Цена:</label>
    <input type="range" id="price-range" min="0" max="100" value="50">
    <button id="apply-filters">Применить фильтрацию</button>
</div>
{% endblock %}
